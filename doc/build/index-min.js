/*!build time : 2013-12.0.06 11:50:25 AM*/
KISSY.add("kg/multipage/2.0.0/index",function(a,b,c){function d(a){var b=this;d.superclass.constructor.call(b,a)}var e=b.all;return a.extend(d,c,{initializer:function(){this.buildDom().bindEvent()},buildDom:function(){for(var a=this.getTotalSuperPage(),b=[],c=1;a>=c;c++)b.push('<option value="'+c+'">'+c+"/"+a+"</option>");return this.set("prevBtn",e('<span class="ks-w-prev">\u4e0a\u4e00\u9875</span>')),this.set("nextBtn",e('<span class="ks-w-next">\u4e0b\u4e00\u9875</span>')),this.set("selectPage",e('<select class="ks-page-index">'+b.join("")+"</select>")),e(this.get("wrap")).append(this.get("prevBtn")).append(this.get("selectPage")).append(this.get("nextBtn")),this.pageStatus(),this.btnStatus(),this.selectHandle(),this},selectHandle:function(){var a=this.get("superPageIndex");this.get("selectPage").val(a)},getTotalSuperPage:function(){var a,b=this.get("totalPage"),c=this.get("superPageSize");return a=Math.ceil(b/c)},bindEvent:function(){var a=this,b=e(this.get("wrap")),c=this.get("selectPage");b.delegate("click",".ks-w-prev",function(b){e(b.currentTarget).hasClass("disable")||a.prev.call(a,b)}).delegate("click",".ks-w-next",function(b){e(b.currentTarget).hasClass("disable")||a.next.call(a,b)}),c.on("change",function(b){a.select.call(a,b)}),this.on("afterPageIndexChange",function(b){b.newVal;a.pageStatus(),a.selectHandle(),a.btnStatus()}).on("afterSuperPageIndexChange",function(){a.selectHandle(),a.btnStatus()})},prev:function(){var a=this.get("superPageIndex"),b=this.get("superPageSize");this.set("superPageIndex",a-1),this.fire("prevSuperPage",{pageIndex:(a-2)*b+1})},next:function(){var a=this.get("superPageIndex"),b=this.get("superPageSize");this.set("superPageIndex",a+1),this.fire("goToSuperPage",{pageIndex:a*b+1})},select:function(a){var b=(this.get("superPageIndex"),this.get("superPageSize")),c=Number(e(a.currentTarget).val());this.set("superPageIndex",c),this.fire("goToSuperPage",{pageIndex:(c-1)*b+1})},pageStatus:function(){var a=this.get("pageIndex"),b=this.get("superPageSize");a%b===0?this.showPage():this.hidePage()},btnStatus:function(){var a=this.get("superPageIndex"),b=this.getTotalSuperPage(),c=this.get("nextBtn"),d=this.get("prevBtn");1===b&&(d.addClass("disable"),c.addClass("disable")),a===b?(d.removeClass("disable"),c.addClass("disable")):1===a?(d.addClass("disable"),c.removeClass("disable")):(d.removeClass("disable"),c.removeClass("disable"))},setPageIndex:function(a){var b=this.get("superPageSize");this.set("pageIndex",a),this.set("superPageIndex",Math.floor(a/b))},showPage:function(){var a=e(this.get("wrap"));a.removeClass("hidden")},hidePage:function(){var a=e(this.get("wrap"));a.addClass("hidden")}},{ATTRS:{wrap:{value:"#ks-w-multipage"},superPageSize:{value:3},totalPage:{value:1},pageIndex:{value:1},superPageIndex:{value:1}}}),d},{requires:["node","rich-base"]});